<!doctype html>
<html lang="en">
	<!-- what kind of idiot would build the entire app in one file? -->
	<head>
		<title>Dataminer : Cogmind Scoresheet Viewer</title>
		<link rel="canonical" href="https://leiavoia.net/cogmind/dataminer/" />
		<meta name="description" content="Interactive scoresheet viewer for Cogmind." />
		<meta name="keywords" content="cogmind,scoresheet,graph,run,morgue file,roguelike" />
		<meta name="author" content="leiavoia" />
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" type="image/x-icon" href="img/favicon.ico" sizes="16x16" />
		<!-- dev version -->
		<!-- <script src="https://unpkg.com/vue"></script> -->
		<!-- prod version -->
		<script src="https://unpkg.com/vue@2.6.14/dist/vue.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.1/chart.min.js"></script>
		<!-- add this if you want chart labels -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script> -->
		<link href="css/bootstrap.slate.min.css" rel="stylesheet"/>
		<style>
		
			CANVAS { height: 1px; }
			
			/* TABLE { --bs-table-accent-bg: none !important; } */
			[v-cloak] > * { display:none }
			.statbox { text-align:center; }
			.statbox { font-weight: bold; }
			.statbox .card-body .card-text { font-size: 150%;}
			.statbox .card-body.numeric .card-text { font-size: 300%;}
			.badges.haspopup .badge { cursor: help; }
			.badges .badge { background-color: #666; }
			.badges .badge[class~='Factory'] { background-color: #AAA; color: #333; }
			.badges .badge[class~='Mines'] { background-color: #504330; }
			.badges .badge[class~='Research'] { background-color: rgb(148, 35, 158); }
			.badges .badge[class~='Access'] { background-color: #ddd; color: #333; }
			.badges .badge[class~='DoCo'] { background-color: #2671b9; }
			.badges .badge[class~='Command'] { background-color: #2671b9; }
			.badges .badge[class~='A0'] { background-color: #ccc; color: rgb(131, 25, 25); }
			.badges .badge[class~='Lab'] { background-color: rgb(111, 163, 114); }
			.badges .badge[class*='Section 7'] { background-color: rgb(111, 163, 114); }
			.badges .badge[class~='Zion'] { background-color: rgb(228, 148, 185); }
			.badges .badge[class~='Imprinted'] { background-color: rgb(228, 148, 185); }
			.badges .badge[class~='ZDC'] { background-color: rgb(175, 81, 125); }
			.badges .badge[class~='GOLEM'] { background-color: rgb(175, 81, 125); }
			.badges .badge[class~='Testing'] { background-color: rgb(28, 122, 28); }
			.badges .badge[class~='Quarantine'] { background-color: rgb(28, 122, 28); }
			.badges .badge[class~='Zhirov'] { background-color: rgb(100, 160, 205); }
			.badges .badge[class~='Dataminer'] { background-color: rgb(100, 160, 205); }
			.badges .badge[class~='Warlord'] { background-color: rgb(131, 25, 25); }
			.badges .badge[class~='ECA'] { background-color: rgb(131, 25, 25); }
			.badges .badge[class~='W-Boys'] { background-color: rgb(131, 25, 25); }
			.badges .badge[class~='Exiles'] { background-color: rgb(100, 160, 205); }
			.badges .badge[class~='FarCom'] { background-color: rgb(100, 160, 205); }
			.badges .badge[class~='Materials'] { background-color: #756a57; }
			.badges .badge[class~='Extension'] { background-color: rgb(179, 176, 14); }
			.badges .badge[class~='Archives'] { background-color: rgb(179, 176, 14); }
			.badges .badge[class~='Cetus'] { background-color: rgb(179, 176, 14); }
			.badges .badge[class~='Hub'] { background-color: rgb(179, 176, 14); }
			.badges .badge[class~='Recycling'] { background-color: rgb(190, 164, 44); }
			.badges .badge[class~='SE'] { background-color: rgb(190, 164, 44); }
			.badges .badge[class~='Storage'] { background-color: rgb(209, 115, 37); }
			.badges .badge[class~='DSF'] { background-color: rgb(209, 115, 37); }
			.badges .badge[class~='Armory'] { background-color: rgb(216, 12, 12); }
			.badges .badge[class~='Waste'] { background-color: rgb(48, 43, 43); }
			.badges .badge[class~='RIF'] { background-color: rgb(216, 12, 12); }
			.badges .badge[class~='CRM'] { background-color: rgb(13, 93, 158); }
			.badges .badge[class~='Exo'] { background-color: rgb(13, 93, 158); }
			.badges .badge[class~='ExoWarrior'] { background-color: rgb(13, 93, 158); }
			.badges .badge[class~='Garrison'] { background-color: rgb(216, 12, 12); }
			.badges .badge[class*='Caves'] { background-color: #504330; }
			.badges .badge[class*='-1 -'] { background-color: #111; color: #D11;}
			.badges .badge[class*='Traitor'] { background-color: #D11; color: #000;}
			.badges .badge[class*='Monster'] { background-color: #D11; color: #000;}
			.badges .badge[class*='Jerk'] { background-color: #D11; color: #000;}
			.badges .badge[class*='W0'],
			.badges .badge[class*='W1'],
			.badges .badge[class*='W2'],
			.badges .badge[class*='W3'],
			.badges .badge[class*='W4'],
			.badges .badge[class*='W5'],
			.badges .badge[class*='W6'],
			.badges .badge[class*='W7'],
			.badges .badge[class*='W8'],
			.badges .badge[class*='W9'] { background-color: #169205; }
			.badges .badge[class~='Impossible'],
			.badges .badge[class~='Millionaire'] { 
				background: 
					radial-gradient(ellipse farthest-corner at right bottom, #FEDB37 0%, #FDB931 8%, #9f7928 30%, #8A6E2F 40%, transparent 80%),
                	radial-gradient(ellipse farthest-corner at left top, #FFFFFF 0%, #FFFFAC 8%, #D1B464 25%, #5d4a1f 62.5%, #5d4a1f 100%);
				color: #FFFFCC;
				text-shadow:rgb(48, 43, 43) 1px 1px 1px;
			}
	
					
			TABLE.heatmap.tiny TD { 
				padding: .15rem .15rem;
			}
			
			TABLE.heatmap.tiny {
				font-size: 8pt;
			}
				
			th.rotate {
				height: 100px;
				white-space: nowrap;
			}

			th.rotate > div {
				transform: translate(-50%, 80px) rotate(290deg);
				width: 1em;
			}
			
			TABLE.heatmap TD { color: #FFF !important; text-align:center; }
			TABLE.heatmap TD.n { color: #666 !important; }
			TABLE.heatmap TD.c0 { background-color: #333; color: #BBB !important; }
			TABLE.heatmap TD.c1 { background-color: #444; color: #FFF !important; }
			TABLE.heatmap TD.c2 { background-color: #555; color: #FFF !important; }
			TABLE.heatmap TD.c3 { background-color: #666; color: #FFF !important; }
			TABLE.heatmap TD.c4 { background-color: #777; color: #FFF !important; }
			TABLE.heatmap TD.c5 { background-color: #888; color: #FFF !important; }
			TABLE.heatmap TD:last-child  { width:inherit; }
			
			/* TABLE.heatmap TD { color: #FFF !important; text-align:center; }
			TABLE.heatmap TD.n { color: #666 !important; }
			TABLE.heatmap TD.c0 { background-color: #26324B; color: #EEE !important; }
			TABLE.heatmap TD.c1 { background-color: #2C473F; color: #EEE !important; }
			TABLE.heatmap TD.c2 { background-color: #2C5E38; color: #EEE !important; }
			TABLE.heatmap TD.c3 { background-color: #55662B; color: #EEE !important; }
			TABLE.heatmap TD.c4 { background-color: #665A2B; color: #EEE !important; }
			TABLE.heatmap TD.c5 { background-color: #662F2B; color: #EEE !important; } */
				
			TR.indent-1 TH { padding-left: 2em; color: rgb(140, 185, 199); }
			TR.indent-1 TD { color: rgb(140, 185, 199); }
			TR.indent-2 TH { padding-left: 4em; color: rgb(136, 202, 150); }
			TR.indent-2 TD { color: rgb(136, 202, 150); }
			TR.indent-3 TH { padding-left: 6em; color: #AAA; }
			TR.indent-3 TD { color: #AAA; }
			TR.indent-4 TH { padding-left: 8em; color: rgb(238, 202, 173); }
			TR.indent-4 TD { color: rgb(238, 202, 173); }
			TR.indent-5 TH { padding-left: 10em; color: rgb(236, 204, 219); }
			TR.indent-5 TD { color: rgb(236, 204, 219); }
			
			TR.hilite TD, TR.hilite TH { background-color: #2A3D2B; }
			
			TD.good { color: rgb(136, 202, 150); }
			TD.bad { color: rgb(221, 75, 75); }
			TD.notice { color: #4490d6; }
			TD.info { color: #AAA; }
			TD.warning { color: rgb(228, 199, 72); }
			
			/* fix bug with Slate theme */
			.table > :not(:first-child) {
				border-top: 0px !important;
			}
			/* general alignment prettiness */
			th:first-child , td:first-child  {
				width:20%;
				white-space: nowrap !important;
			} 
			td:last-child  {
				width:80%;
			}
			H2,H3,H4,H5,H6 { margin-top: 1.5em; margin-bottom: 0.5em; }
			.slot_loadout SPAN {
				display:inline-block;
				margin-right:0.25em;
				height: 4em;
				width: 1em;
				background: #666;
			}
			.slot_loadout SPAN.p { background-color: #dfd239; }
			.slot_loadout SPAN.n { background-color: #418d4f; }
			.slot_loadout SPAN.u { background-color: #1e66a7; }
			.slot_loadout SPAN.w { background-color: #aa1b36; }
			
			.progress-bar.poor { background-color: #aa1b36 !important; }
			.progress-bar.avg { background-color: #e0cc32 !important; }
			.progress-bar.good { background-color: #308030 !important; }
			.progress-bar.excl { background-color: #3cb356 !important; }
			.progress-bar.best { background-color: #49dd52 !important; }
			
			TD.avg { color: #AAA !important; }
			TD.plus400 { color: #a4ffab !important; }
			TD.plus200 { color: #49dd52 !important; }
			TD.plus100 { color: #3cb356 !important; }
			TD.plus50  { color: #539253 !important; }
			TD.minus90 { color: #ff3e62 !important; }
			TD.minus75 { color: #ca0b2e !important; }
			TD.minus50 { color: #d4a300 !important; }
			TD.minus25 { color: #e0cc32 !important; }
								
		</style>
	</head>
	
	<body >
		<div class="container-lg pt-4">
			
			<div id="app" v-cloak>
			
				<!-- This extra H1 is here specifically to help google title-rewriting issues -->
				<h1 class="mb-3" :class="scoresheet && pane!='input' && pane!='loading' ? '' : 'text-center'" v-if="!scoresheet">
					<img src="img/dataminer_icon.png" style="height:1em; width: 1em; background-color: #000;" />
					Cogmind Dataminer : Scoresheet Viewer
				</h1>
				
				<h1 class="mb-3" :class="scoresheet && pane!='input' && pane!='loading' ? '' : 'text-center'" v-else>
					<img src="img/dataminer_icon.png" style="height:1em; width: 1em; background-color: #000;" />
					Cogmind Dataminer
					<span class="text-muted" v-if="scoresheet"> : {{scoresheet.header.playerName}} : Game #{{scoresheet.game.gameNumber}}</span>	
				</h1>
						
				<!-- intro page to request JSON file -->
				<template v-if="pane=='input'">
					<div class="alert alert-warning mt-5" role="alert" v-if="error_msg" >{{error_msg}}</div>
					<div class="row justify-content-md-center mt-5">
						<div class="col-md-auto">
							<!-- input pane toggle -->
							<nav class="nav nav-pills nav-justified">
								<button class="nav-item nav-link" :class="inputbox_mode=='url' ? '' : 'active'" v-on:click="inputbox_mode='url'">URL</button>
								<button class="nav-item nav-link" :class="inputbox_mode=='upload' ? '' : 'active'" v-on:click="inputbox_mode='upload'">File Upload</button>
							</nav>
							<!-- scoresheet URL input pane -->
							<div class="container-fluid p-5 pb-5 pt-2 mt-0 mb-3 bg-primary text-light rounded text-center" v-show="inputbox_mode=='url'">
								<h2>Scoresheet URL or Hash:</h2>
								<form action="" method="get" v-on:submit.prevent="LoadScoresheet()">
									<div class="input-group">
										<input type="text" class="form-control" v-model="filehash" placeholder="Example: FjLf3qHftm4yrzkjq" />
										<input type="submit" class="btn bg-secondary text-light" name="submit" value="Fetch" />
									</div>							
								</form>
								<p class="mt-5"><a href="https://www.gridsagegames.com/cogmind/scores/runs_by_version.html" target="_blank">Scoresheets Archive</a></p>
								<p class=""><a href="https://www.gridsagegames.com/cogmind/scores/runs_by_version_patron.html" target="_blank">Patreon Beta Scoresheets</a></p>
								<p class=""><a href="help.html" target="_blank">Where to find your scoresheets</a></p>
								<p class="mt-3 text-warning"><b>Warning:</b> Scoresheets contain spoilers!</p>
							</div>
							<!-- scoresheet upload pane -->
							<div class="container-fluid p-5 pb-5 pt-2 mt-0 mb-5 bg-primary text-light rounded text-center" v-show="inputbox_mode=='upload'">
								<h2>Upload Scoresheet .JSON:</h2>
								<form action="" method="">
									<div class="input-group">
										<input type="file" class="form-control" id="jsonfile" name="jsonfile" accept="application/json" />
									</div>							
									<p class="mt-5 mb-3"><a href="help.html" target="_blank">Where to find your scoresheets</a></p>
								</form>
							</div>
							
						</div>
					</div>
					
					<!-- recently viewed -->
					<div class="row justify-content-md-center mt-3" v-if="recentlyViewed && recentlyViewed.length">
						<div class="col-md-auto">
							<h2 class="my-4 text-center">Recently Viewed</h2> 
							<table class="table table-hover">
								<tr>
									<th>Player</th>
									<th>Game</th>
									<th>Result</th>
									<th>Score</th>
									<th>Date</th>
								</tr>
								<tr class="text-nowrap" style="cursor: pointer;" v-for="row of recentlyViewed" v-on:click="LoadScoresheet(row.hash)">
									<td>{{row.name}}</td>
									<td>#{{row.gameNumber}}</td>
									<td>{{row.win ? 'ASCENDED' : row.finalmap}}</td>
									<td>{{(row.score||0).toLocaleString()}}</td>
									<td>{{row.date}}</td>
								</tr>
							</table>
							<p class="text-center"><a href="javascript:void(0)" class="text-muted" v-on:click="ClearScoresheetList()">Clear List</a></p>
						</div>
					</div>
				</template>
				
				<!-- loading page -->
				<div v-if="pane=='loading'" class=" pt-5 text-center" style="font-size: 200%">
					<p>Loading Scoresheet ...</p>
					<progress style="height: 2em;" ></progress>
				</div>
				
				<!-- pane nav bar -->
				<nav class="nav nav-pills nav-justified my-3" v-if="scoresheet && pane!='input' && pane!='loading' ">
					<button type="button" class="btn nav-item mx-1 text-nowrap btn-primary" v-on:click="ChangePane('input')">◄</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='overview' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('overview')">Overview</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='route' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('route')">Route</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='build' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('build')">Build</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='combat' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('combat')">Combat</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='hacking' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('hacking')">Hacking</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='stealth' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('stealth')">Stealth</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='tables' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('tables')">Analysis</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='heatmap' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('heatmap')">Heat Map</button>
				</nav>
				
				<!-- overview pane -->			
				<template v-if="pane=='overview'" >			
										
					<div class="container-fluid px-5 py-4 mt-3 mb-5 bg-primary text-light rounded">
						<div class="row row-cols-lg-2 g-5">
							<div class="col text-center">
								<h1 class="display-1 text-success" v-if="scoresheet.header.win">ASCENDED!</h1>
								<h1 class="display-1 text-success" v-else-if="scoresheet.header.runResult == '[OPEN_PERCENT]'">IN PLAY</h1>
								<h1 class="display-1 text-danger" v-else>DEFEAT!</h1>
								<p class="lead" v-if="scoresheet.header.runResult != '[OPEN_PERCENT]'">
									{{scoresheet.header.runResult}}
								</p>
								<div class="row row-cols-lg">
									<div class="col text-center">
										<p class="mt-4 mb-0">Score:</p>
										<p class="display-3 mt-0 pt-0 text-info">{{scoresheet.performance.totalScore.toLocaleString()}}</p>
									</div>
									<div class="col text-center" v-if="!scoresheet.header.win">
										<p class="mt-4 mb-0" v-if="scoresheet.header.runResult == '[OPEN_PERCENT]'">Location:</p>
										<p class="mt-4 mb-0" v-else>Died In:</p>
										<p class="display-3 mt-0 pt-0 text-info">{{scoresheet.game.finalMapReached}}</p>
									</div>
								</div>
								<p class="badges text haspopup">
									<span class="badge ms-1" :class="b[0]" v-for="b in scoresheet.badges" :title="b[1]">{{b[0]}}</span>
								</p>
								<p class="badges text" v-if="scoresheet.achievements.achievements && scoresheet.achievements.achievements.length">
									Achievements:<br/>
									<span class="badge ms-1" v-for="a in scoresheet.achievements.achievements" style="white-space: nowrap">{{a}}</span>
								</p>
							</div>
							<div class="col">
								<table class="table table-borderless" style="--bs-table-accent-bg: none">
									<tr>
										<th>Player</th>
										<td><a v-bind:href="'community.html?player=' + scoresheet.header.playerName" target="_blank">{{scoresheet.header.playerName}}</a></td>
									</tr>
									<tr>
										<th>Date</th>
										<td>{{scoresheet.header.date}}</td>
									</tr>
									<tr>
										<th>Run Time</th>
										<td>{{scoresheet.game.runTime}}</td>
									</tr>
									<tr v-if="scoresheet.header.difficulty">
										<th>Difficulty</th>
										<td>
											{{scoresheet.header.difficulty.replace('DIFFICULTY_','')}}
											<span v-if="scoresheet.header.difficulty == 'DIFFICULTY_ROGUE'">(High)</span>
											<span v-if="scoresheet.header.difficulty == 'DIFFICULTY_ADVENTURER'">(Medium)</span>
											<span v-if="scoresheet.header.difficulty == 'DIFFICULTY_EXPLORER'">(Easy)</span>
										</td>
									</tr>
									<tr>
										<th>Special Mode</th>
										<td>
											<span v-if="scoresheet.game.specialMode == 'SPECIAL_MODE_NONE'">Normal</span>
											<span v-else-if="typeof(scoresheet.game.specialMode)=='string'">{{scoresheet.game.specialMode.replace('SPECIAL_MODE_','')}}</span>
											<span v-else>{{scoresheet.game.specialMode}}</span>
										</td>
									</tr>
									<tr>
										<th>Game Version</th>
										<td>{{scoresheet.header.version}}</td>
									</tr>
									<tr>
										<th>Seed</th>
										<td><i>{{scoresheet.game.worldSeed}}</i></td>
									</tr>								
									<tr v-if="scoresheet.meta.source_file_txt || scoresheet.meta.source_file_json || scoresheet.meta.permalink">
										<th>Source Files</th>
										<td v-if="scoresheet.meta.source_file_txt" class="text-bold">
											<a v-bind:href="scoresheet.meta.source_file_txt" target="_blank" v-if="scoresheet.meta.source_file_txt">TXT</a>&nbsp; 
											<a v-bind:href="scoresheet.meta.source_file_json" target="_blank" v-if="scoresheet.meta.source_file_json">JSON</a>&nbsp; 
											<a v-bind:href="scoresheet.meta.permalink" target="_blank" v-if="scoresheet.meta.permalink">Permalink</a>
										</td>
									</tr>								
									<tr v-if="analysis && analysis['parts.inventory.slots']">
										<th>Comparisons</th>
										<td>
											{{analysis['parts.inventory.slots'].samples.toLocaleString()}} runs in dataset. 
											{{scoresheet.header.analysisNote}}
											<a style="text-decoration:underline; cursor:pointer;" v-on:click="ForceComparisonToStandardSet()" v-if="!scoresheet.header.analysisNote">Compare to standardized dataset instead</a>
										</td>
									</tr>
									<tr v-if="analysis && analysis['parts.inventory.slots']">
										<th><img src="img/graph_sample.png" alt="frequency graph sample" /></th>
										<td class="text-muted">
											Frequency graphs compare your run to community averages. 
											<br/>
											<a href="community.html" target="_blank">Explore community stats.</a>
										</td>
									</tr>
									<tr v-if="!analysis || !analysis['parts.inventory.slots']">
										<th>Comparisons</th>
										<td>
											<a style="text-decoration:underline; cursor:pointer;" v-on:click="ForceComparisonToStandardSet()" v-if="!scoresheet.header.analysisNote">Compare to standardized dataset instead</a>
										</td>
									</tr>
								</table>
							</div>
						</div>
					</div>	
					
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Score</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.totalScore.toLocaleString()}}</span>
										<canvas id="scoreSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Turns</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.turnsPassed.toLocaleString()}}</span>
										<canvas id="turnsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Actions Per Minute</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{(scoresheet.stats.actions.cadence||0).toFixed(0)}}</span>
										<canvas id="cadenceSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<!-- <div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Average Mobility Speed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesMoved.averageSpeed.toLocaleString()}}</span>
										<canvas id="avgSpeedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div> -->
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Slots</div>
									<div class="card-body text-success numeric">
										<span class="card-text">
											{{scoresheet.parts.power.slots}}-{{scoresheet.parts.propulsion.slots}}-{{scoresheet.parts.utility.slots}}-{{scoresheet.parts.weapon.slots}}
										</span>
									</div>
								</div>
							</div>							
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Regions Visited</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.regionsVisited.count||0}}</span>
										<canvas id="regionsVisitedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<!-- <div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Evolutions</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.evolutions.count}}</span>
									</div>
								</div>
							</div> -->
							<div class="col">
								<div class="card statbox  h-100">
									<div class="card-header">Bots Destroyed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.robotsDestroyed.count.toLocaleString()}}</span>
										<canvas id="botsDestroyedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>							
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Alien Techs Used</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.alienTechUsed.count||0}}</span>
										<canvas id="alienTechsUsedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<!-- <div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Prototypes ID'd</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.prototypesIdentified.count.toLocaleString()}}</span>
									</div>
								</div>
							</div> -->
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">NPCs Murdered</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.kills.uniquesNpcsDestroyed||0}}</span>
										<canvas id="NPCsMurduredSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Allies</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.overall.toLocaleString()}}</span>
										<canvas id="alliesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Largest Army</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.largestGroup||0}}</span>
										<canvas id="largestArmySparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Most Corruption</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.highestCorruption.overall||0}}%</span>
										<canvas id="mostCorruptionSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Peak Build Rating</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.peakState.rating||0}}</span>
										<canvas id="peakBuildSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>

					<h2>Engagement</h2>
					<p><span class="badge bg-secondary">BETA</span> Engagement measures your blended performance across a variety of metrics, averaged by the number and type of locations you explored.</p>
					<table class="table">
						<tr v-for="(v,k) in scoresheet.engagement">
							<th>{{k.Undatafy()}}</th>
							<td>{{v.val.toFixed()}}%</td>
							<td>
								<div class="progress">
									<div class="progress-bar bg-secondary" role="progressbar" :class="scoresheet.engagement[k].classname" :style="{width:`${scoresheet.engagement[k].val}%`}"></div>
								</div>
								<span class="text-muted" v-if="k=='combat'">Hostiles destroyed, damage inflicted, volleys fired, melee strikes</span>
								<span class="text-muted" v-else-if="k=='hacking'">Number and variety of authorized and unauthorized machine hacks, hacking success rate</span>
								<span class="text-muted" v-else-if="k=='exploration'">Map tiles revealed, branches visited, known exits, found locations, prototypes identified, scrap and derelict logs found</span>
								<span class="text-muted" v-else-if="k=='stealth'">Max and average alert level, times spotted, tactical retreats, jamming, distress signals</span>
								<span class="text-muted" v-else-if="k=='allies'">Number of allies, army strength, ally attacks and kills</span>
								<span class="text-muted" v-else-if="k=='build'">Average build rating, slot utilization, peak performance metrics</span>
							</td>
						</tr>
					</table>
					
					<h2>Turns Taken</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="turnsTakenChart"></canvas>
					</div>
					
					<h2>Alert Influence</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="alertChart"></canvas>
					</div>
										
					<h2>Actions</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
						<canvas id="actionsChart"></canvas>
					</div>					
					
					<!-- <h2>Core Remaining %</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="coreChart"></canvas>
					</div> -->
					
					<h2>Score Breakdown</h2>
					<table class="table ">
						<tr v-for="(v,k) in scoresheet.performance">
							<th>{{k.Undatafy()}}</th>
							<td>{{typeof(v)==='object' ? v.points : v}}</td>
						</tr>
						<tr v-for="(v,k) in scoresheet.bonus" :class="{'indent-1': (k!='bonus')}">
							<th>{{k.Undatafy()}}</th>
							<td>{{v}}</td>
						</tr>
					</table>
					
					<h2>Peak Performance</h2>
					<table class="table">
						<tr v-for="(v,k) in scoresheet.metricPerformance">
							<th>{{k.Undatafy()}}</th>
							<td>{{v.val}}</td>
							<td>
							<div class="progress">
								<div class="progress-bar bg-secondary" role="progressbar" :class="scoresheet.metricPerformance[k].classname" :style="{width:`${scoresheet.metricPerformance[k].pct}%`}"></div>
							</div>
							</td>
						</tr>
					</table>					
					
				</template>	
				
				<!-- ROUTE -->
				<template v-if="pane=='route'">
					<h2>Route</h2>
					<table class="table" style="font-size: 150%">
						<tr v-for="row of scoresheet.charts.route_data">
							<th>{{row.depth}}</th>
							<td class="badges">
								<span class="badge ms-1" :class="m" v-for="m of row.maps">{{m}}</span>
							</td>
						</tr>
					</table>
					
					<h2>Chalk Outline</h2>
					<div style="font-weight:bold; font-family:monospace; white-space: pre; line-height: 1.08em; letter-spacing: 0.36em;" v-html="scoresheet.map.html"></div>
										
					<h2>Log Tail</h2>
					<blockquote class="text-info">
						<span v-for="row of scoresheet.lastMessages.messages">
							{{row}}<br/>
						</span>
					</blockquote>
					
					<h2>History</h2>
					<table class="table table-sm">
						<tr>
							<th>Map</th>
							<th>Turn</th>
							<th>Event</th>
						</tr>
						<tbody v-for="map of scoresheet.route.entries">
							<tr v-for="row of map.historyEvents">
								<td class="text-nowrap">{{map.location.depth}}/{{map.location.mapname}}</td>
								<td>{{row.turn}}</td>
								<td :class="row.class">{{row.event}}</td>
							</tr>
						</tbody>
					</table>

				</template>
				
				<!-- BUILD -->
				<template v-if="pane=='build'">
					
					<h2 class="">Slots</h2>
									
					<div class="container-fluid mt-5 mb-3 g-0">
						<div class="row row-cols-1 row-cols-md-4 g-2">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Power</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.parts.power.slots}}</span>
										<canvas id="slotPowerSparkChart"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Propulsion</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.parts.propulsion.slots}}</span>
										<canvas id="slotPropSparkChart"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Utility</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.parts.utility.slots}}</span>
										<canvas id="slotUtilSparkChart"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Weapon</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.parts.weapon.slots}}</span>
										<canvas id="slotWeaponSparkChart"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
						
					<!-- <h2>Build Quality</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="buildQualityChart"></canvas>
					</div> -->
										
					<h2>Propulsion Used</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
						<canvas id="propPieChart"></canvas>
					</div>
					
					<h2>Mobility</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
						<canvas id="propGraph"></canvas>
					</div>		
					
					<h2>Speed <span class="text-muted">(Time Units Per Step)</span></h2>
					<div class="container-fluid mt-5 mb-3 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Average Speed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesMoved.averageSpeed.toLocaleString()}}</span>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Fastest Speed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesMoved.fastestSpeed.toLocaleString()}}</span>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Slowest Speed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesMoved.slowestSpeed.toLocaleString()}}</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="speedGraph"></canvas>
					</div>		
												
					<h2 class="">Weight</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="weightChart"></canvas>
					</div>
					
					<h2 class="">Inventory Capacity</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="inventoryChart"></canvas>
					</div>
		
					<h2 class="">Final Build: {{scoresheet.cogmind.finalBuild}}</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="classDistroChart"></canvas>
					</div>
							
					<table class="table table-sm">
						<tr v-for="map of scoresheet.route.entries">
							<td class="text-nowrap">{{map.location.depth}}/{{map.location.mapname}}</td>
							<td>{{map.dominantClass}}</td>
						</tr>
					</table>
																													
					<h2>Part Swapping</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<div class="row row-cols-sm-2 g-5">
							<div class="col">
								<h3 class="text-center">Parts Lost</h3>
								<canvas id="partsLostPieChart"></canvas>
							</div>
							<div class="col">
								<h3 class="text-center">Parts Attached</h3>
								<canvas id="partsAttachedPieChart"></canvas>
							</div>
						</div>
						<div class="row row-cols-sm-2 g-5">
							<div class="col">
								<h3 class="text-center">Power Attached</h3>
								<canvas id="powerAttachedPieChart"></canvas>
							</div>
							<div class="col">
								<h3 class="text-center">Propulsion Attached</h3>
								<canvas id="propulsionAttachedPieChart"></canvas>
							</div>
						</div>
						<div class="row row-cols-sm-2 g-5">
							<div class="col">
								<h3 class="text-center">Utilities Attached</h3>
								<canvas id="utilityAttachedPieChart"></canvas>
							</div>
							<div class="col">
								<h3 class="text-center">Weapons Attached</h3>
								<canvas id="weaponAttachedPieChart"></canvas>
							</div>
						</div>
					</div>
									
					<h2>Favorite Parts</h2>
					
					<h3>Overall</h3>
					<table class="table ">
						<tr v-for="(v,k) in scoresheet.favorites">
							<th>{{k.Undatafy()}}</th>
							<td>{{v.overall}}</td>
						</tr>
					</table>
					
					<h3>Per-Type</h3>
					<table class="table ">
						<tbody v-for="(group,groupname) in scoresheet.favorites">
							<tr>
								<th>{{groupname.Undatafy()}}</th>
								<td></td>
							</tr>
							<tr v-for="(v,k) in group" v-if="k!='overall'" class="indent-1">
								<th>{{k.Undatafy()}}</th>
								<td>{{v}}</td>
							</tr>
						</tbody>
					</table>
											
					<div class="row row-cols-sm-2 g-5">
						<div class="col">
							<h2>Peak Build</h2>
							<table class="table table-sm">
								<tbody v-for="(group,groupname) in scoresheet.charts.peak_build">
									<tr>
										<th>{{groupname.Undatafy()}}</th>
									</tr>
									<tr v-for="part in group" class="indent-1">
										<th>{{part}}</th>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<h2>Final Build</h2>
							<table class="table table-sm">
								<tbody v-for="(group,groupname) in scoresheet.charts.final_build">
									<tr>
										<th>{{groupname.Undatafy()}}</th>
									</tr>
									<tr v-for="part in group" class="indent-1">
										<th>{{part}}</th>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
								
					<h2>Alien Techs Used</h2>
					<table class="table">
						<tr v-for="v in scoresheet.alienTechUsed.parts">
							<td>{{v}}</td>
						</tr>
					</table>
					<p v-if="!scoresheet.alienTechUsed.parts || !scoresheet.alienTechUsed.parts.length">None</p>
					
				</template>
				
				<!-- HACKING -->
				<template v-if="pane=='hacking'">
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Hacking Skill</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.hackingSkill.toFixed(1)}}%</span>
										<canvas id="hackingSkillSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Successfull Hacks</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.totalHacks.successful.toLocaleString()}}</span>
										<canvas id="successfullHacksSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Failed Hacks</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{
											(scoresheet.stats.hacking.totalHacks.overall
											- scoresheet.stats.hacking.totalHacks.successful).toLocaleString()}}</span>
										<canvas id="failedHacksSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Detections</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.hackingDetections.overall.toLocaleString()}}</span>
										<canvas id="detectionsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Database Lockouts</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.totalHacks.databaseLockouts.toLocaleString()}}</span>
										<canvas id="dbLockoutsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Botnets</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.unauthorizedHacks.terminals.botnet.toLocaleString()}}</span>
										<canvas id="botnetsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Parts Repaired</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.partsRepaired.overall.toLocaleString()}}</span>
										<canvas id="partsRepairedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Parts Scanalyzed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.partsScanalyzed.overall.toLocaleString()}}</span>
										<canvas id="partsScannedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Part Schematics Acquired</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.partSchematicsAcquired.overall.toLocaleString()}}</span>
										<canvas id="numPartSchematicsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Parts Built</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.partSchematicsAcquired.partsBuilt.overall.toLocaleString()}}</span>
										<canvas id="partsBuiltSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bot Schematics Acquired</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.robotSchematicsAcquired.overall.toLocaleString()}}</span>
										<canvas id="numBotSchematicsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Built</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.hacking.robotSchematicsAcquired.robotsBuilt.overall.toLocaleString()}}</span>
										<canvas id="botsBuiltSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
							
					<h2>Hacks Per Machine</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="hacksPerMachineChart"></canvas>
					</div>
					
					<template v-if="scoresheet.charts.num_directhacks">
						<h2>Direct Hacks</h2>
						<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
							<canvas id="directHacksChart" ></canvas>
						</div>
					</template>
					
					<template v-if="scoresheet.charts.num_uhacks">
						<h2>Unauthorized Hacks</h2>
						<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
							<canvas id="unauthorizedHacksChart"></canvas>
						</div>
					</template>
					
					<h2>Bot Hacking</h2>
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">				
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">RIF Installations</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.bothacking.usedRifInstaller.overall.toLocaleString()}}</span>
										<canvas id="rifInstallsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Rewired</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.bothacking.robotsRewired.toLocaleString()}}</span>
										<canvas id="botsRewiredSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Hacked</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.bothacking.robotsHacked.overall.toLocaleString()}}</span>
										<canvas id="botsHackedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
						</div>
					</div>
					
					<template v-if="scoresheet.charts.num_bothacks">
						<h3>Bothacks</h3>
						<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
							<div class="container g-0">
								<canvas id="botHacksChart"></canvas>
							</div>
						</div>
					</template>
						
					<h2>Schematics Obtained</h2>						
					<table class="table text-nowrap" v-if="scoresheet.charts.schematics.length">
						<tr v-for="i of scoresheet.charts.schematics">
							<td>{{i.map}}</td>
							<td>{{i.name.Undatafy()}}</td>
						</tr>
					</table>					
					<p v-if="!scoresheet.charts.schematics.length">None</p>		
						
					<h2>Fabricated Stuff</h2>						
					<table class="table text-nowrap" v-if="scoresheet.charts.fabbed_stuff.length">
						<tr v-for="i of scoresheet.charts.fabbed_stuff">
							<td>{{i.map}}</td>
							<td>{{i.name.Undatafy()}}</td>
							<td>{{i.qty}}</td>
						</tr>
					</table>
					<p v-if="!scoresheet.charts.fabbed_stuff.length">None</p>		
								
				</template>
				
				<!-- COMBAT -->
				<template v-if="pane=='combat'">
				
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Volleys</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.volleysFired.overall.toLocaleString()}}</span>
										<canvas id="volleysSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Shots Fired</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.shotsFired.overall.toLocaleString()}}</span>
										<canvas id="shotsFiredSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Shots Per Volley</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ 
											scoresheet.stats.combat.shotsPerVolley >= 10
											? 'AWS*'
											: scoresheet.stats.combat.shotsPerVolley.toFixed(1) 
										}}</span>
										<canvas id="shotsPerVolleySparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Total Damage Inflicted</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ scoresheet.stats.combat.damageInflicted.overall.toLocaleString() }}</span>
										<canvas id="totalDamageInflictedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Total Damage Received</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ scoresheet.stats.combat.damageTaken.overall.toLocaleString() }}</span>
										<canvas id="totalDamageReceivedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Dish-Out Ratio</div>
									<div class="card-body text-success numeric">
										<span class="card-text" v-if="scoresheet.stats.combat.dishoutRatio === -1">Perfect!</span>
										<span class="card-text" v-else>{{scoresheet.stats.combat.dishoutRatio.toFixed(0)}}%</span>
										<canvas id="dishOutSparkChart"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Melee Attacks</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.meleeAttacks.overall.toLocaleString()}}</span>
										<canvas id="meleeAttacksSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>									
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Melee Sneak Attacks</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.meleeAttacks.sneakAttacks.overall.toLocaleString()}}</span>
										<canvas id="sneakAttacksSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>									
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Melee Follow-Ups</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ (scoresheet.stats.combat.meleeFollowupPercent || 0).toFixed(1)}}%</span>
										<canvas id="meleeFollowupSparkChart"></canvas>	
									</div>
								</div>
							</div>		
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Core Hits</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ scoresheet.stats.combat.shotsHitRobots.coreHits.toLocaleString() }}</span>
										<canvas id="coreHitsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>																										
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Overflow Damage</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ (scoresheet.stats.combat.overflowDamagePercent||0).toFixed(1) }}%</span>
										<canvas id="overflowDamageSparkChart" v-if="analysis"></canvas>	
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Accuracy</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ (scoresheet.stats.combat.accuracy||0).toFixed(1) }}%</span>
										<canvas id="accuracySparkChart"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
											
					<div class="row row-cols-sm-2 g-5">
						<div class="col">
							<h3 class="text-center">Damage Types</h3>
							<canvas id="damageTypesChart"></canvas>
						</div>
						<div class="col">
							<h3 class="text-center">Weapon Types</h3>
							<canvas id="weaponTypesChart"></canvas>
						</div>
					</div>
					
					<h2>Damage Inflicted</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
						<canvas id="damageInflictedChart"></canvas>
					</div>
					
					<h2>Damage Received</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="damageReceivedChart"></canvas>
					</div>
					
					<!-- this info not available in pre-release Beta 11 versions because scoresheet format not updated -->
					<template v-if="scoresheet.stats.combat.shotsHitRobots.criticalStrikes">
						<h2>Critical Hits</h2>
						<div class="container-fluid mt-5 mb-5 g-0">
							<div class="row row-cols-1 row-cols-md-3 g-4">
								<div class="col">
									<div class="card statbox h-100">
										<div class="card-header">Critical Hits</div>
										<div class="card-body text-success numeric">
											<span class="card-text">{{ scoresheet.stats.combat.shotsHitRobots.criticalStrikes?.overall || scoresheet.stats.combat.shotsHitRobots?.criticalHits || 0 }}</span>
											<canvas id="criticalHitsSparkChart" v-if="analysis"></canvas>
										</div>
									</div>
								</div>
								<div class="col">
									<div class="card statbox h-100">
										<div class="card-header">Critical Kills</div>
										<div class="card-body text-success numeric">
											<span class="card-text">{{ scoresheet.stats.combat.shotsHitRobots.criticalKills||0}}</span>
											<canvas id="criticalKillsSparkChart" v-if="analysis"></canvas>
										</div>
									</div>
								</div>
								<div class="col">
									<div class="card statbox h-100">
										<div class="card-header">Critical Hit Ratio</div>
										<div class="card-body text-success numeric">
											<span class="card-text" v-if="scoresheet.stats.combat.criticalHitPercent">{{ (scoresheet.stats.combat?.criticalHitPercent||0).toFixed(1) }}%</span>
											<span v-else>N/A</span>
											<canvas id="criticalHitPctSparkChart" v-if="analysis"></canvas>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
							<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
							<canvas id="criticalHitsPieChart"></canvas>
						</div>
					</template>
									
					<h2 class="">Bots Destroyed</h2>
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Combat Bots Destroyed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.kills.combatHostilesDestroyed.overall.toLocaleString()}}</span>
										<canvas id="combatBotsDestroyedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Kill Streak</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.kills.bestKillStreak.overall.toLocaleString()}}</span>
										<canvas id="killStreakSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Most Kills In One Turn</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.kills.maxKillsInSingleTurn.overall||0}}</span>
										<canvas id="mostKillsInOneTurnSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>							
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Corrupted</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.robotsCorrupted.overall.toLocaleString()}}</span>
										<canvas id="botsCorruptedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Melted</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.robotsMelted.overall.toLocaleString()}}</span>
										<canvas id="botsMeltedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Smooshed By Treads</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.targetsRammed.crushed.toLocaleString()}}</span>
										<canvas id="botsCrushedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>
										
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="killsChart"></canvas>
					</div>
					
					<h3 class="">Bot Types Destroyed</h3>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="killsTypesChart"></canvas>
					</div>
					

					<h2>Allies</h2>
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">						
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Total Allies</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.overall.toLocaleString()}}</span>
										<canvas id="alliesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>			
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Largest Army</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.largestGroup||0}}</span>
										<canvas id="largestArmySparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Best Ally Rating</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.highestRatedAlly||0}}</span>
										<canvas id="bestAllySparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Best Group Rating</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalAllies.highestRatedGroup.toLocaleString()}}</span>
										<canvas id="bestArmySparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Ally Attacks</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.allyAttacks.overall.toLocaleString()}}</span>
										<canvas id="attacksByAlliesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Ally Damage Inflicted</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.allyAttacks.totalDamage.toLocaleString()}}</span>
										<canvas id="allyDamageSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>		
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Kills by Allies</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.allyAttacks.kills.toLocaleString()}}</span>
										<canvas id="allyKillsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>			
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Zionite Dispatches</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.zioniteDispatches?.overall || 0}}</span>
										<canvas id="zioniteDispatchesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>						
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Orders Given</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.allies.totalOrders.overall||0}}</span>
										<canvas id="ordersGivenSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>							
						</div>
					</div>
										
					<h2>Miscellanea</h2>
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Rammed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.targetsRammed.overall.toLocaleString()}}</span>
										<canvas id="botsRammedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Power Chain Reactions</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.powerChainReactions.toLocaleString()}}</span>
										<canvas id="powerChainReactionsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Sieges</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ scoresheet.stats.combat.siegeActivations.overall||0 }}</span>
										<canvas id="siegesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>		
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Hottest Temperature</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.combat.highestTemperature.overall.toLocaleString()}}</span>
										<canvas id="hottestTempSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>											
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Overheating Issues</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ scoresheet.stats.combat.highestTemperature.effects.overall || 0 }}</span>
										<canvas id="overheatingIssuesSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>							
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Gun-Slings</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{ (scoresheet.stats.combat.shotsFired.secondaryTargets.overall || 0).toLocaleString() }}</span>
										<canvas id="gunslingsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>																										
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Machines Disabled</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.machines.machinesDisabled.overall.toLocaleString()}}</span>
										<canvas id="machinesDisabledSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Collateral Damage</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.performance.valueDestroyed.count.toLocaleString()}}</span>
										<canvas id="collateralDamageSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Collateral Damage Percent</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{
											scoresheet.stats.combat.collateralDamagePct === 100
											? '*'
											: scoresheet.stats.combat.collateralDamagePct.toFixed(1)
										}}%</span>
										<canvas id="collateralDamagePctSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>	
						</div>
					</div>
												
				</template>
				
				
				<!-- STEALTH -->
				<template v-if="pane=='stealth'">
					
					<h2>Alert Influence</h2>

					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="advAlertChart"></canvas>
					</div>
					
					<h2 class="mt-5">Time Spent at Alert Level</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="alertLevelsChart"></canvas>
					</div>
										
					<h2>Making A Scene</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<p class="text-sm text-center text-muted">(click a label to show/hide category)</p>
						<canvas id="stealthChart"></canvas>
					</div>	
			
					<h2 class="mt-5">Squads Dispatched</h2>
					<div class="container-fluid px-5 py-4 mt-5 mb-5 bg-primary text-light rounded">
						<canvas id="squadsDispatchedChart"></canvas>
					</div>
									
					<h2>Stealth Stats</h2>
					<div class="container-fluid mt-5 mb-5 g-0">
						<div class="row row-cols-1 row-cols-md-3 g-4">
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Max Alert</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.alert.peakInfluence.overall.toLocaleString()}}</span>
										<canvas id="maxAlertSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>						
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Times Spotted</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.stealth.timesSpotted.overall.toLocaleString()}}</span>
										<canvas id="spottedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>		
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Squads Dispatched</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.alert.squadsDispatched.overall.toLocaleString()}}</span>
										<canvas id="squadsDispatchedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>											
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Most Bots Tracking You</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.stealth.timesSpotted.peakTrackingTotal.toLocaleString()}}</span>
										<canvas id="mostBotsTrackingSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Tactical Retreats</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.stealth.timesSpotted.tacticalRetreats.toLocaleString()}}</span>
										<canvas id="retreatsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Distress Signals Sent</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.stealth.distressSignals.toLocaleString()}}</span>

										<canvas id="distressSignalsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Signals Jammed By You</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.stealth.communicationsJammed.overall.toLocaleString()}}</span>
										<canvas id="signalsJammedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Haulers Reinforced</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.alert.haulersReinforced.toLocaleString()}}</span>
										<canvas id="haulersDistressedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Engineers Reinforced</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.alert.constructionImpeded.toLocaleString()}}</span>
										<canvas id="engineersDistressedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Traps Triggered</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.traps.trapsTriggered.overall.toLocaleString()}}</span>
										<canvas id="trapsTriggeredSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
				
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Derelict Logs Recovered</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.intel.derelictLogsRecovered.toLocaleString()}}</span>
										<canvas id="logsRecoveredSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>					
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Bots Analyzed</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.intel.robotAnalysisTotal.toLocaleString()}}</span>
										<canvas id="botsAnalyzedSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Spaces Dug</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesDug||0}}</span>
										<canvas id="spacesDugSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>															
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Cave-Ins</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.spacesMoved.caveInsTriggered||0}}</span>
										<canvas id="caveInsSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>															
							<div class="col">
								<div class="card statbox h-100">
									<div class="card-header">Digging Luck</div>
									<div class="card-body text-success numeric">
										<span class="card-text">{{scoresheet.stats.exploration.diggingLuck.toFixed(1)}}%</span>
										<canvas id="diggingLuckSparkChart" v-if="analysis"></canvas>
									</div>
								</div>
							</div>															
						</div>
					</div>							
					
				</template>		
				
				
				<!-- TABULAR DATA -->
				<template v-if="pane=='tables'">
					<template v-if="scoresheet.spotlites && scoresheet.spotlites.length">
						<h2>Record Breakers:</h2>
						<p class="muted">Stats tied or exceeded on this run, as compared to current community stats.</p>
						<table class="table ">
							<tr v-for="row in scoresheet.spotlites" class="hilite">
								<td>★ {{row.name}}</td>
								<td><b>{{row.value.toLocaleString()}}</b></td>
								<td><i>{{row.diff}}</i></td>
							</tr>
						</table>
					</template>
					<div class="row row-cols-sm-2 g-5" v-if="scoresheet.hilites?.length && scoresheet.lowlites?.length">
						<div class="col ">
							<h2>Highs</h2>
							<p class="muted">Highest stats relative to community averages.</p>
							<table class="table ">
								<tr v-for="row in scoresheet.hilites" :class.once="`${(row.recordbreaker?'hilite':'')}`">
									<td>{{row.name}}</td>
									<td><b>{{row.value.toLocaleString()}}</b></td>
									<td><i>{{row.diff}}</i></td>
								</tr>
							</table>
						</div>
						<div class="col">
							<h2>Lows</h2>
							<p class="muted">Lowest non-zero stats relative to community averages.</p>
							<table class="table ">
								<tr v-for="row in scoresheet.lowlites">
									<td>{{row.name}}</td>
									<td><b>{{row.value.toLocaleString()}}</b></td>
									<td><i>{{row.diff}}</i></td>
								</tr>
							</table>
						</div>
					</div>
					
					<h2>Stats &amp; Analysis</h2>			
					<table class="table table-sm data">
						<colgroup>
							<col class="name" />
							<col class="value" />
							<col v-if="analysis" class="diff" />
							<col v-if="analysis" class="avg" />
							<col v-if="analysis" class="min" />
							<col v-if="analysis" class="max" >
						</colgroup>
						<tr>
							<th>Name</th>
							<th>Value</th>
							<th v-if="analysis">Difference</th>
							<th v-if="analysis">Average</th>
							<th v-if="analysis">Min</th>
							<th v-if="analysis">Max</th>
						</tr>
						<!-- with analysis -->
						<tr v-for="i of scoresheet.flatstats" :class.once="`indent-${i[2]} ${(i[10]?'hilite':'')}`" v-if="analysis">
							<th>{{i[0].Undatafy()}}</th>
							<td :class="i[9]"><b>{{i[1] ? i[1].toLocaleString() : ''}}</b></td>
							<td :class="i[9]">{{i[8] ? i[8] : ''}}</td>
							<td :class="i[9]"><i>{{i[4]}}</i></td>
							<td :class="i[9]"><sub>{{i[5]}}</sub></td>
							<td :class="i[9]"><sup>{{i[6]}}</sup></td>
						</tr>
						<!-- without analysis -->
						<tr v-for="i of scoresheet.flatstats" :class.once="[`indent-${i[2]}`]" v-else>
							<th>{{i[0].Undatafy()}}</th>
							<td :class="i[9]"><b>{{i[1] ? i[1].toLocaleString() : ''}}</b></td>
						</tr>
					</table>			
				</template>					

				
				<!-- HEAT MAP TABLE -->
				<template v-if="pane=='heatmap'">
									
					
					<div class="table-responsive" v-for="heatmap of scoresheet.heatmap">
						<h2>{{heatmap[0].name.Undatafy()}}</h2>
						<table class="table table-sm heatmap table-borderless" :class="{tiny: (scoresheet.charts.chart_map_labels.length > 22)}"><!-- table-borderless -->
							<th></th>
							<th class="rotate"><div><span>Total</span></div></th>
							<th class="rotate" v-for="m of scoresheet.charts.chart_map_labels"><div><span>{{m}}</span></div></th>
							<tr v-for="i of heatmap" :class.once="[`indent-${i.depth}`]">
								<th>{{i.name.Undatafy()}}</th>
								<td>{{i.total ? i.total.toLocaleString() : null}}</td>
								<td v-for="(m,index) of i.run" :class="i.colors[index]">{{m || '.'}}</td>
							</tr>
						</table>
					</div>
					
				</template>					


				<!-- pane nav bar -->
				<nav class="nav nav-pills nav-justified my-5" v-if="scoresheet && pane!='input' && pane!='loading' ">
					<button type="button" class="btn nav-item mx-1 text-nowrap btn-primary" v-on:click="ChangePane('input')">◄</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='overview' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('overview')">Overview</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='route' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('route')">Route</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='build' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('build')">Build</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='combat' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('combat')">Combat</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='hacking' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('hacking')">Hacking</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='stealth' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('stealth')">Stealth</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='tables' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('tables')">Analysis</button>
					<button type="button" class="btn nav-item mx-1 text-nowrap" :class="pane=='heatmap' ? 'btn-secondary' : 'btn-primary'" v-on:click="ChangePane('heatmap')">Heat Map</button>
				</nav>
					
			</div><!-- end "app" div -->
		</div><!-- end page container -->
		
		<script src="js/dataminer.js"></script>
		
	</body>
</html>